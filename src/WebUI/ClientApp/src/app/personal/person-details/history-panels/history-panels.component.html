<mat-accordion>
  <ng-container *ngFor="let history of historyPanels | keyvalue">
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title> {{ history.key }} </mat-panel-title>
      </mat-expansion-panel-header>
      <ng-container *ngIf="history.value && history.value.length > 0; else noData">
        <table id="tight-table" mat-table [dataSource]="history.value">
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>{{ history.key }}</th>
            <td mat-cell *matCellDef="let element">
              <a (click)="emitOpenDetails($event)">{{ element.name }}</a>
            </td>
          </ng-container>
          <ng-container matColumnDef="time period">
            <th mat-header-cell *matHeaderCellDef>{{ "Von - Bis" }}</th>
            <td mat-cell *matCellDef="let element">
              <p class="cell-paragraph">
                {{ dateToString(element.startDate) + " -" }}
              </p>
              <p class="cell-paragraph">{{ dateToString(element.enddate) }}</p>
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </ng-container>
      <ng-template #noData> <p>Keine Daten vorliegend</p> </ng-template>
    </mat-expansion-panel>
  </ng-container>
</mat-accordion>
